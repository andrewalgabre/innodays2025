<div class="results-container" *ngIf="analysisResult">
  <!-- Header -->
  <header class="app-header">
    <button class="btn-icon-header" (click)="goHome()">
      <lucide-icon name="arrow-left"></lucide-icon>
    </button>
    <h1 class="app-title">Scan-Ergebnisse</h1>
    <div class="placeholder"></div>
  </header>

  <!-- Main Content -->
  <main class="results-main">
    <!-- Captured Image -->
    <div class="image-container" *ngIf="capturedImage">
      <img [src]="capturedImage" alt="Aufgenommenes Klauenbild">
    </div>

    <!-- Diagnosis Card -->
    <div class="result-card diagnosis-card">
      <div class="card-header">
        <div class="icon-badge" [class.success]="analysisResult.diagnosis === 'gesund'"
             [class.warning]="analysisResult.diagnosis !== 'gesund'">
          <lucide-icon name="check-circle-2" *ngIf="analysisResult.diagnosis === 'gesund'"></lucide-icon>
          <lucide-icon name="alert-triangle" *ngIf="analysisResult.diagnosis !== 'gesund'"></lucide-icon>
        </div>
        <div>
          <h2>{{ analysisResult.diagnosis | titlecase }}</h2>
          <p class="confidence">{{ (analysisResult.confidence * 100).toFixed(0) }}% Konfidenz</p>
        </div>
      </div>
      <p class="diagnosis-summary" *ngIf="analysisResult.summary">
        {{ analysisResult.summary }}
      </p>
    </div>

    <!-- Severity Card -->
    <div class="result-card">
      <div class="card-title">
        <lucide-icon name="bar-chart-3"></lucide-icon>
        <h3>Schweregrad</h3>
      </div>
      <div class="severity-indicator">
        <div class="severity-bar">
          <div class="severity-fill" [class]="'severity-' + analysisResult.severity"
               [style.width]="getSeverityWidth()"></div>
        </div>
        <span class="severity-label" [class]="'severity-' + analysisResult.severity">
          {{ analysisResult.severity | titlecase }}
        </span>
      </div>
    </div>

    <!-- Affected Areas -->
    <div class="result-card" *ngIf="analysisResult.affectedAreas.length > 0">
      <div class="card-title">
        <lucide-icon name="map-pin"></lucide-icon>
        <h3>Betroffene Bereiche</h3>
      </div>
      <div class="areas-list">
        <div class="area-item" *ngFor="let area of analysisResult.affectedAreas">
          <div class="area-info">
            <span class="area-name">{{ area.name }}</span>
            <span class="area-temp">{{ area.temperature }}°C</span>
          </div>
          <div class="area-severity">
            <div class="severity-dots">
              <span class="dot" *ngFor="let i of [1,2,3,4,5]"
                    [class.active]="i <= area.severity"></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recommendations -->
    <div class="result-card" *ngIf="analysisResult.recommendations.length > 0">
      <div class="card-title">
        <lucide-icon name="lightbulb"></lucide-icon>
        <h3>Empfehlungen</h3>
      </div>
      <ul class="recommendations-list">
        <li *ngFor="let rec of analysisResult.recommendations">{{ rec }}</li>
      </ul>
    </div>

    <!-- Veterinary Alert -->
    <div class="alert-card" *ngIf="analysisResult.requiresVeterinaryAttention">
      <lucide-icon name="alert-circle"></lucide-icon>
      <div>
        <h4>Tierärztliche Behandlung erforderlich</h4>
        <p>Dieser Zustand erfordert eine professionelle tierärztliche Untersuchung.</p>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="actions">
      <button class="btn btn-secondary" (click)="goToHistory()">
        <lucide-icon name="history"></lucide-icon>
        Verlauf anzeigen
      </button>
      <button class="btn btn-primary" (click)="newScan()">
        <lucide-icon name="camera"></lucide-icon>
        Neuer Scan
      </button>
    </div>
  </main>
</div>
